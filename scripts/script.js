const songs = [
    {
        title: "FFH",
        src: "songs/FFH.mp3",
        cover: "imgs/FFHPortada.png",
        lyrics: [
            { time: 13, text: "Five fucking hours in the stars(in the stars)" },
            { time: 16, text: "five fucking hours in the stars(in the stars)" },
            { time: 19, text: "you try to play with me but nah(but nah)" },
            { time: 22, text: "im going to fuck you in doggistyle(style)" },
            { time: 26, text: "Te cre√≠as el rey del rap" },
            { time: 28, text: "tu baby la tengo guarda" },
            { time: 30, text: "tu papis me van a escuchar" },
            { time: 31, text: "tu te crees alguien pero na" },
            { time: 33, text: "Tu vives en una pel√≠cula" },
            { time: 34, text: "es lalaland" },
            { time: 35, text: "y ahora pa pa no ratata" },
            { time: 37, text: "dos disparos nada m√°s" },
            { time: 39, text: "porque en ra-tas" },
            { time: 41, text: "no hay que gastar" },
            { time: 42, text: "tu quieres fluir" },
            { time: 44, text: "pues seminal" },
            { time: 46, text: "Five fucking hours in the stars(in the stars)" },
            { time: 49, text: "five fucking hours in the stars(in the stars)" },
            { time: 53, text: "you try to play with me but nah(but nah)" },
            { time: 57, text: "im going to fuck you in doggistyle(style)" },
            { time: 60, text: "Wanna fuuck" },
            { time: 61, text: "baby you're Mona Lisaaa" },
            { time: 63, text: "a ti te quiero pintar" },
            { time: 65, text: "esto no va ha acabar" },
            { time: 67, text: "tu quieres mas ron pero te toca mamar" },
            { time: 73, text: "Five fucking hours in the stars(in the stars)" },
            { time: 76, text: "five fucking hours in the stars(in the stars)" },
            { time: 79, text: "you try to play with me but nah(but nah)" },
            { time: 81, text: "im going to f*ck you in doggistyle(style)" },
            { time: 86, text: "Tu ya estuviste en dagestan" },
            { time: 89, text: "cinco meses reformando" },
            { time: 90, text: "pero sin mejorar" },
            { time: 92, text: "tu baby esta llamando" },
            { time: 93, text: "no lo voy a colgar" },
            { time: 94, text: "tus padres preguntando" },
            { time: 96, text: "si podemos colaborar" },
            { time:98, text: "tu perdiste los comandos" },
            { time: 99, text: "ahora te toca picar" },
            { time: 101, text: "yo he vido desde abajo" },
            { time: 103, text: "y ahora nos llaman papas" },
            { time: 106, text: "Five fucking hours in the stars(in the stars)" },
            { time: 109, text: "five fucking hours in the stars(in the stars)" },
            { time: 112, text: "you try to play with me but nah(but nah)" },
            { time: 115, text: "im going to fuck you in doggistyle(style)" },
            { time: 119, text: "Tu tuviste algo pero ya no eres nada" },
            { time: 122, text: "me llamas llorando por la madrugada" },
            { time: 126, text: "trataste de hundir un barco que volaba" },
            { time: 129, text: "ahora te toca ir cerrando las heridas que no sana" },
            { time: 132, text: "Five fucking hours in the stars(in the stars)" },
            { time: 135, text: "five fucking hours in the stars(in the stars)" },
            { time: 139, text: "you try to play with me but nah(but nah)" },
            { time: 143, text: "im going to f*ck you in doggi style(style)" },
        ]
    },
    {
        title: "Insano",
        src: "songs/Insano.mp3",
        cover: "imgs/InsanoPortada.png",
        lyrics: [
            { time: 9, text: "Y me he cansado" },
            { time: 11, text: "toca apostar todo en una mano" },
            { time: 14, text: "si tu me llama entonces le llegamos" },
            { time: 16, text: "saca la reglas,vamos a medirno el n*bo" },
            { time: 19, text: "y ya se que somos m√°s de tres" },
            { time: 22, text: "tengo al Oscar, al ra√∫l y al Noliel" },
            { time: 23, text: "llamame mas tarde que ahora me toca comer" },
            { time: 25, text: "tu novia me ha llamado y se lo voy a coger" },
            { time: 31, text: "Es que soy un cabron" },
            { time: 32, text: "y que lo digas" },
            { time: 33, text: "pa igualarme tienes que escribir par de barritas" },
            { time: 36, text: "te metiste pa por lo menos hacer una buena linea" },
            { time: 39, text: "Que dios me los bendiga" },
            { time: 42, text: "Por que llego con carb√≥n" },
            { time: 43, text: "pa hacerme una cachimba" },
            { time: 44, text: "la cocin√≥,esta lleva sorpresita" },
            { time: 47, text: "le meti√≥ un polen que ven√≠a de siria" },
            { time: 50, text: "explosi√≥n, por suerte tengo baliza" },
            { time: 53, text: "Dando mas vueltas que valkiria" },
            { time: 55, text: "yo no rompo muro" },
            { time: 56, text: "yo rompo par de culos" },
            { time: 57, text: "que me dicen papi tu eres un chulo" },
            { time: 59, text: "suena patada de canguro" },
            { time: 61, text: "lo cambio a extremoduro" },
            { time: 62, text: "pongo a Melendi pero cuando fumaba duro" },
            { time: 64, text: "En espa√±a un cani en argentina un turro" },
            { time: 67, text: "mi ambici√≥n es por testarudo" },
            { time: 69, text: "a mis padres un avion" },
            { time: 70, text: "para que vean el mundo" },
            { time: 71, text: "y que vean a su hijo con orgullo" },
            { time: 74, text: "Yo no escribo esta canci√≥n para hacerme el chulo" },
            { time: 77, text: "me hago el chulo porque escribi esta cancion en un segundo" },
            { time: 79, text: "las l√°grimas de Abuela cuando me vea cruzar el mundo" },
            { time: 82, text: "eso no lo pagas con ning√∫n presunto" },
            { time: 85, text: "No necesito joyas, ni una Mansion" },
            { time: 88, text: "solo necesito tener cerca al que siempre me rodeo" },
            { time: 91, text: "empezamos la canci√≥n como una destrucci√≥n" },
            { time: 94, text: "el tiempo reconstruye porque lo escribo yo" },
            { time: 97, text: "Y esta es tu √∫ltima misi√≥n" },
            { time: 99, text: "escribe un tema que levante una naci√≥n" },
            { time: 102, text: "yo escrib√≠ un √°lbum que creo una religion" },
            { time: 104, text: "escuchan mis versos formando en el escuadr√≥n" },
            { time: 108, text: "no te rindas nunca mira donde estoy" },
            { time: 111, text: "Y mira donde estoy" },
            { time: 113, text: "con mi convoy" },
            { time: 115, text: "esta canci√≥n no es apta para toys" },
            { time: 117, text: "yo evoluciono como los kois" },
            { time: 119, text: "te saco un album, diamond boys" },
            { time: 124, text: "Y se acicala" },
            { time: 126, text: "la baby parece chewbacca" },
            { time: 128, text: "meti√≥ un grito y no estamos en narnia" },
            { time: 131, text: "esto es una guerra de las galaxias" },
            { time: 133, text: "as√≠ que antes de acabar dime como te llamas" },
            { time: 138, text: "tu tienes un flow que acapara" },
            { time: 140, text: "salimos en revistas de la caras" },
            { time: 143, text: "y como si nada" },
            { time: 145, text: "te preparaste para una lluvia dorada" },
            { time: 148, text: "ten√≠a ganas de dejar la yeguada" },
            { time: 150, text: "tu miraste al frente parece una cabra" },
            { time: 153, text: "estamos fuertes ya sonamos en Alaska" }
        ]
    },
       {
    title: "MASA",
    src: "songs/MASA.mp3",
    cover: "imgs/MasaPortada.png",
    lyrics: [
        // INTRO
        { time: 2, text: "Yeah," },
        { time: 6, text: "2006 en la cartera," },
        { time: 8, text: "Maillot sonando, noche sincera," },
        { time: 11, text: "Mono Maillot‚Ä¶" },

        // VERSO 1
        { time: 14, text: "En la cartera un cond√≥n caducado desde 2006," },
        { time: 17, text: "espero que salga antes que el GTA 6." },
        { time: 20, text: "Conoc√≠ a una chica, me dijo: ¬øqu√© es lo que hac√©is?," },
        { time: 24, text: "me puse tan nervioso que me tuve que correr otra vez." },

        { time: 27, text: "Con el fondo de pantalla de Lana Del Rey," },
        { time: 29, text: "yo con un v√≠deo de Lana sonando en el MP3." },
        { time: 32, text: "Y es que no te lo vas a creer," },
        { time: 33, text: "Mono Maillot rompiendo la industria otra vez." },

        { time: 34, text: "Con los panas de fiesta en Conil," },
        { time: 36, text: "con nosotros la movie no va a morir." },
        { time: 38, text: "Ojeras marcadas, no puedo dormir," },
        { time: 40, text: "la noche me llama, me toca fluir." },
        { time: 41, text: "En un beat que empieza lento como el visir," },
        { time: 43, text: "cuando sube el bajo ya no quiero huir." },

        // CORO
        { time: 44, text: "Llevando las penas pa‚Äô casa," },
        { time: 48, text: "pero esta noche todo se pasa." },
        { time: 51, text: "Mono Maillot todo lo arrasa," },
        { time: 54, text: "humo en el aire, luces que abrazan." },

        { time: 57, text: "Que prendan la American zaza," },
        { time: 59, text: "con los panas chill en la terraza." },
        { time: 64, text: "Si el mundo pesa, se deshace," },
        { time: 67, text: "cuando suena el bajo todo encaja." },

        // VERSO 2
        { time: 76, text: "Botellas vac√≠as, promesas rotas," },
        { time: 78, text: "risas que tapan las noches locas." },
        { time: 80, text: "Ella me mira, se muerde la boca," },
        { time: 81, text: "dice que le gusta c√≥mo esto provoca." },

        { time: 83, text: "No creo en el tiempo ni en los relojes," },
        { time: 85, text: "vivimos despacio, matando dolores." },
        { time: 86, text: "Fotos borrosas, mil corazones," },
        { time: 88, text: "historias que mueren al salir del coche." },

        { time: 89, text: "Yo no presumo, yo solo lo cuento," },
        { time: 91, text: "todo lo bueno nace del intento." },
        { time: 93, text: "Si caigo al suelo, vuelvo contento," },
        { time: 95, text: "porque de aqu√≠ sale todo lo que siento." },

        // CORO 2
        { time: 97, text: "Llevando las penas pa‚Äô casa," },
        { time: 99, text: "pero esta noche todo se pasa." },
        { time: 103, text: "Mono Maillot todo lo arrasa," },
        { time: 107, text: "humo en el aire, luces que abrazan." },

        { time: 111, text: "Que prendan la American zaza," },
        { time: 113, text: "con los panas chill en la terraza." },
        { time: 117, text: "Si el mundo pesa, no pasa nada," },
        { time: 121, text: "cuando suena el bajo todo encaja." },

        // PUENTE
        { time: 126, text: "Y si ma√±ana todo se acaba," },
        { time: 129, text: "que nos pillen bailando en la nada." },
        { time: 132, text: "Con Maillot sonando de madrugada," },
        { time: 135, text: "la vida duele menos si no piensas nada." },     

        { time: 136, text: "No busco respuestas ni fama prestada," },
        { time: 140, text: "solo otra noche que no pida nada." },
        { time: 144, text: "Si el alma tiembla, se calma, se pasa," },
        { time: 148, text: "Mono Maillot cerrando la plaza." },

        // CORO FINAL
        { time: 152, text: "Llevando las penas pa‚Äô casa," },
        { time: 154, text: "pero esta noche todo se pasa." },
        { time: 156, text: "Mono Maillot todo lo arrasa," },
        { time: 160, text: "esto no muere, solo se transforma." },

        { time: 164, text: "Que prendan la American zaza," },
        { time: 166, text: "con los panas viendo c√≥mo amanece." },
        { time: 170, text: "Si el tiempo corre, que no nos alcance," },
        { time: 173, text: "vivimos ahora, que luego se desvanece." }

    ]
       },
    {
        title: "Noche loca",
        src: "songs/Noche loca.mp3",
        cover: "imgs/NocheLocaPortada.png",  
        lyrics: [
            { time: 0, text: "Noche loca" },
            { time: 5, text: "Nadie duerme hoy" },
            { time: 10, text: "Fiesta hasta el amanecer" }
        ]
    },
    {
        title: "Not mine",
        src: "songs/Not mine.mp3",
        cover: "imgs/NotMinePortada.png",
        lyrics: [
            { time: 7, text: "Not mine, not mine" },
            { time: 8, text: "veo una piba digo this is mine" },
            { time: 10, text: "tu olor combina con mis Off-White" },
            { time: 12, text: "estamos en otra liga desde la high school" },
            { time: 14, text: "you wanna prove it" },
            { time: 16, text: "maybe sometime you lose it" },
            { time: 17, text: "baby como t√∫ no hay" },
            { time: 20, text: "t√∫ no entiendes los vibes" },
            { time: 22, text: "T√∫ mueves ese culo muy yummy" },
            { time: 24, text: "yo te ense√±o como Nanami" },
            { time: 26, text: "t√∫ lo que quieres es lo f√°cil" },
            { time: 27, text: "pero eso ya no" },
            { time: 30, text: "Entro r√°pido, me llaman rayo" },
            { time: 32, text: "quieren verlo de cerca, pero estallo" },
            { time: 34, text: "quieren una ofrenda, que se la d√© yo" },
            { time: 35, text: "los puse en cuarentena cuando el tema sali√≥" },
            { time: 36, text: "Yo no soy tu papi, pero papi me suelen llamar" },
            { time: 39, text: "toma papel y l√°piz que te lo voy a explicar" },
            { time: 43, text: "t√∫ me llamaste pa‚Äô un rapi, pero tengo que cantar" },
            { time: 46, text: "t√∫ lo quieres explicit y as√≠ te lo voy a dar" },
            { time: 51, text: "A 120 en la autov√≠a, no puedo pasar" },
            { time: 55, text: "le meto el pingo a tu amiga, ella lo quer√≠a disfrutar" },
            { time: 58, text: "se sum√≥ toda la familia, esto es una gira mundial" },
            { time: 62, text: "quieren vestirse con las m√≠as, pero antes no quer√≠an estar" },
            { time: 65, text: "Ponle una sangr√≠a al pana, se va a deshidratar" },
            { time: 70, text: "t√∫ quisiste la vac√≠a, a m√≠ no me lo tienes que contar" },
            { time: 73, text: "Rata, empieza a sonar" },
            { time: 75, text: "el rifle dispara, es talib√°n" },
            { time: 76, text: "quieren correr, pero no podr√°n" },
            { time: 77, text: "quieren beber, yo pongo la casa" },
            { time: 80, text: "Not mine, not mine" },
            { time: 81, text: "veo una piba digo this is mine" },
            { time: 83, text: "tu olor combina con mis Off-White" },
            { time: 85, text: "estamos en otra liga desde la high school" },
            { time: 88, text: "you wanna prove it" },
            { time: 89, text: "maybe sometime you lose it" },
            { time: 90, text: "baby como t√∫ no hay" },
            { time: 93, text: "t√∫ no entiendes los vibes" },
            { time: 95, text: "T√≠o, t√≠o, siento el fr√≠o" },
            { time: 97, text: "todos quieren de lo m√≠o" },
            { time: 98, text: "con vuestras pibas hago el tr√≠o" },
            { time: 100, text: "si se suman yo no he sido" },
            { time: 102, text: "I can, I can" },
            { time: 104, text: "t√∫ eres una mosca, yo un pekin√©s" },
            { time: 106, text: "touch√©, touch√©" },
            { time: 107, text: "suena la esquina con Calvin Klein" },
            { time: 109, text: "Carmen, Carmen" },
            { time: 111, text: "pone su toto como pastel" },
            { time: 116, text: "Not mine, not mine" },
            { time: 117, text: "veo una piba digo this is mine" },
            { time: 119, text: "tu olor combina con mis Off-White" },
            { time: 121, text: "estamos en otra liga desde la high school" },
            { time: 124, text: "you wanna prove it" },
            { time: 125, text: "maybe sometime you lose it" },
            { time: 127, text: "baby como t√∫ no hay" },
            { time: 128, text: "t√∫ no entiendes los vibes" },
            { time: 136, text: "pero la miro y digo mine‚Ä¶" },
            { time: 143, text: "pero la miro y digo mine‚Ä¶" }
        ]
    },
    {
        title: "Dioses del reggaeton",
        src: "songs/dioses del reggaeton.mp3",
        cover: "imgs/PortadaDioses.png",
        lyrics: [
            { time: 0, text: "Dioses del reggaeton" },
            { time: 5, text: "Bajaron del cielo" },
            { time: 10, text: "Para hacernos perrear" }
        ]
    },
    {
        title: "Mo√±ota",
        src: "songs/mo√±ota.mp3",
        cover: "imgs/Mo√±otaPortada.png",      
        lyrics: [
            { time: 10, text: "Quiero una mo√±ota que combine con mi outfit" },
            { time: 13, text: "medio venezolana que me habla como Gonzy" },
            { time: 16, text: "si eres pre 2000 entonces t√≠rame al twenty" },
            { time: 19, text: "me borr√© Twitter porque parec√≠a Only" },
            { time: 21, text: "Tiene el toto rosa, no lo creo hasta el prove it" },
            { time: 24, text: "esta mierda est√° seca, pega como Luffy" },
            { time: 26, text: "tiraste del prepucio, dicen gomu no mi" },
            { time: 30, text: "pelo naranjita y ladrona como Nami" },
            { time: 32, text: "no sab√≠as d√≥nde y te montaste en mi Pagani" },
            { time: 43, text: "Mami, s√∫bete encima de m√≠" },
            { time: 46, text: "que esta noche no tiene fin" },
            { time: 55, text: "dice que se quiere venir" },
            { time: 57, text: "desde que me vio subir" },
            { time: 64, text: "Botella, humo y sudor" },
            { time: 67, text: "me pide que le d√© calor" },
            { time: 70, text: "se envici√≥ de mi voz" },
            { time: 73, text: "ahora quiere m√°s de los dos" },
            { time: 77, text: "Manda fotos privas con la prima en la cama" },
            { time: 79, text: "quieren que Noli y Abel le den rama" },
            { time: 82, text: "dec√≠a que era real pero toa estaba pintada" },
            { time: 84, text: "mu√±equitas como t√∫ nunca me pusieron trabas" },
            { time: 88, text: "Dec√≠a que era lanzada" },
            { time: 90, text: "le fui a saludar, se qued√≥ paralizada" },
            { time: 93, text: "dijo que no era real y que la levantara" },
            { time: 95, text: "nos sacamos un v√≠deo viral y solo era la entrada" },
            { time: 99, text: "Mami, s√∫bete encima de m√≠" },
            { time: 101, text: "que esta noche no tiene fin" },
            { time: 109, text: "dice que se quiere venir" },
            { time: 112, text: "desde que me vio subir" },
            { time: 119, text: "Botella, humo y sudor" },
            { time: 122, text: "me pide que le d√© calor" },
            { time: 125, text: "se envici√≥ de mi voz" },
            { time: 128, text: "ahora quiere m√°s de los dos" },
            { time: 132, text: "Un beso pa mam√° que est√° en la casa" },
            { time: 134, text: "viendo c√≥mo su hijo ahora llena la plaza" },
            { time: 137, text: "antes dudaban, ahora ninguno rechaza" },
            { time: 139, text: "tir√© el pan al aire y la falsa lo caza" },
            { time: 141, text: "Me ped√≠a amor, pero no estoy en eso" },
            { time: 144, text: "coraz√≥n fr√≠o, congelado en el proceso" },
            { time: 148, text: "un polvo y me fui, ten√≠a otro ingreso" },
            { time: 150, text: "vida r√°pida, no hay tiempo pa receso" },
            { time: 154, text: "Ya ped√≠ el Rappi, la baby quiere el quicky" },
            { time: 158, text: "dice que conmigo se siente lucky" },
            { time: 160, text: "cara de santa pero es freaky" },
            { time: 162, text: "cuando la castigo se pone sticky" }
        ]
    }
];

let songIndex = 0;

// DOM Elements
const audio = document.getElementById("audio");
const playBtn = document.querySelector(".play");
const prevBtn = document.getElementById("prev");
const nextBtn = document.getElementById("next");
const progress = document.querySelector(".progress");
const currentContainer = document.querySelector(".current");
const durationContainer = document.querySelector(".duration");
const volumeSlider = document.querySelector(".volume");
const muteBtn = document.querySelector(".mute");
const coverImg = document.getElementById("cover-img");
const songTitle = document.getElementById("song-title");
const downloadLink = document.getElementById("download");
const lyricsContent = document.getElementById("lyrics-content");

// Initialize Player
loadSong(songs[songIndex]);

// Functions
function loadSong(song) {
    songTitle.innerText = song.title;
    audio.src = song.src;
    coverImg.src = song.cover;
    downloadLink.href = song.src;
    
    // Load lyrics
    loadLyrics(song.lyrics);
}

function playSong() {
    audio.play();
    playBtn.textContent = "‚è∏";
}

function pauseSong() {
    audio.pause();
    playBtn.textContent = "‚ñ∂";
}

function prevSong() {
    songIndex--;
    if (songIndex < 0) {
        songIndex = songs.length - 1;
    }
    loadSong(songs[songIndex]);
    playSong();
}

function nextSong() {
    songIndex++;
    if (songIndex > songs.length - 1) {
        songIndex = 0;
    }
    loadSong(songs[songIndex]);
    playSong();
}

function updateProgress(e) {
    const { duration, currentTime } = e.srcElement;
    if (isNaN(duration)) return;
    
    const progressPercent = (currentTime / duration) * 100;
    progress.value = progressPercent;
    
    currentContainer.innerText = formatTime(currentTime);
    durationContainer.innerText = formatTime(duration);
    
    syncLyrics(currentTime);
}

function setProgress() {
    const width = this.value;
    const duration = audio.duration;
    audio.currentTime = (width / 100) * duration;
}

function setVolume() {
    audio.volume = this.value;
}

function toggleMute() {
    audio.muted = !audio.muted;
    muteBtn.textContent = audio.muted ? "üîá" : "üîä";
}

function formatTime(time) {
    const minutes = Math.floor(time / 60);
    let seconds = Math.floor(time % 60);
    if (seconds < 10) {
        seconds = `0${seconds}`;
    }
    return `${minutes}:${seconds}`;
}

// Lyrics Logic
function loadLyrics(lyrics) {
    lyricsContent.innerHTML = "";
    if (!lyrics || lyrics.length === 0) {
        lyricsContent.innerHTML = "<p>No lyrics available.</p>";
        return;
    }
    
    lyrics.forEach((line, index) => {
        const p = document.createElement("p");
        p.innerText = line.text;
        p.setAttribute("data-time", line.time);
        p.id = `line-${index}`;
        lyricsContent.appendChild(p);
    });
}

function syncLyrics(currentTime) {
    const lyrics = songs[songIndex].lyrics;
    if (!lyrics) return;
    
    // Find current line
    let currentLineIndex = -1;
    
    for (let i = 0; i < lyrics.length; i++) {
        if (currentTime >= lyrics[i].time) {
            currentLineIndex = i;
        } else {
            break;
        }
    }
    
    // Highlight logic
    const allLines = lyricsContent.querySelectorAll("p");
    allLines.forEach(line => line.classList.remove("highlight"));
    
    if (currentLineIndex !== -1) {
        const activeLine = document.getElementById(`line-${currentLineIndex}`);
        if (activeLine) {
            activeLine.classList.add("highlight");
            // Auto scroll to active line
            activeLine.scrollIntoView({ behavior: "smooth", block: "center" });
        }
    }
}

// Event Listeners
playBtn.addEventListener("click", () => {
    const isPlaying = playBtn.textContent === "‚è∏";
    if (isPlaying) {
        pauseSong();
    } else {
        playSong();
    }
});

prevBtn.addEventListener("click", prevSong);
nextBtn.addEventListener("click", nextSong);

audio.addEventListener("timeupdate", updateProgress);
audio.addEventListener("ended", nextSong);

progress.addEventListener("input", setProgress);
volumeSlider.addEventListener("input", setVolume);
muteBtn.addEventListener("click", toggleMute);
